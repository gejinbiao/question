# JVM组成部分及其作用
JVM：运行时数据区，类加载器，执行引擎，本地接口

![NXRXOU.png](https://s1.ax1x.com/2020/07/03/NXRXOU.png)

![NXWZ0e.png](https://s1.ax1x.com/2020/07/03/NXWZ0e.png)

运行时数据区（JVM内存）：

堆：对象实例
栈：局部变量表，方法出口
方法区：类信息，常量，静态变量，编译后的代码
程序计数器：行号指示器。循环，跳转等基础指令
本地方法栈：VM调用native方法
执行引擎：

gc
编译器
顺便说一下堆栈区别：

![NXRzTJ.png](https://s1.ax1x.com/2020/07/03/NXRzTJ.png)

1. 物理地址
	1. 堆不连续，栈连续
2. 内存
	1. 堆运行时确认，大小不固定
	2. 栈编译时确认，大小固定　　
3. 存放内容
	1. 堆是对象实例，静态的对象
	2.栈局部变量，返回结果　　
4. 程序可见度
	1. 堆共享
	2. 栈线程私有　　

1.类加载器（Class Loader）：加载类文件到内存。Class loader只管加载，只要符合文件结构就加载，至于能否运行，它不负责，那是有Exectution Engine 负责的。

2.执行引擎（Execution Engine）：也叫解释器，负责解释命令，交由操作系统执行。

3.本地库接口（Native Interface）：本地接口的作用是融合不同的语言为java所用

4.运行时数据区（Runtime Data Area）：

 （1）堆。堆是java对象的存储区域，任何用new字段分配的java对象实例和数组，都被分配在堆上，java堆可用-Xms和-Xmx进行内存控制，jdk1.7以后，运行时常量池从方法区移到了堆上。

![NX4ahd.png](https://s1.ax1x.com/2020/07/03/NX4ahd.png)

（2）方法区：用于存储已被虚拟机加载的类信息，常量，静态变量，即时编译器编译后的代码等数据。

　　误区：方法区不等于永生代
　很多人原因把方法区称作“永久代”（Permanent Generation），本质上两者并不等价，只是HotSpot虚拟机垃圾回收器团队把GC分代收集扩展到了方法区，或者说是用来永久代来实现方法区而已，这样能省去专门为方法区编写内存管理的代码，但是在Jdk8也移除了“永久代”，使用Native Memory来实现方法区。

（3）虚拟机栈：虚拟机栈中执行每个方法的时候，都会创建一个栈桢用于存储局部变量表，操作数栈，动态链接，方法出口等信息。

（4）本地方法栈：与虚拟机发挥的作用相似，相比于虚拟机栈为Java方法服务，本地方法栈为虚拟机使用的Native方法服务，执行每个本地方法的时候，都会创建一个栈帧用于存储局部变量表，操作数栈，动态链接，方法出口等信息。

（5）程序计数器。指示Java虚拟机下一条需要执行的字节码指令。